<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content="version 0.22.1" />
    <title>&#220;R&#220;NLER / RE&#199;ETE SORGULAMA</title>
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="//fonts.googleapis.com/css?family=Cuprum" rel="stylesheet">

    
    <link href='/Content/plugins/font-awesome/fonts/opensans.css' rel='stylesheet' type='text/css'>
    
    <link href='/Content/plugins/font-awesome/fonts/opensans1.css' rel='stylesheet' type='text/css'>

    <link href="/Content/plugins/font-awesome/css/ltr/font-awesome.min.css" rel="stylesheet" />
    <link href="/Content/plugins/simple-line-icons/ltr/simple-line-icons.min.css" rel="stylesheet" />
    <link href="/Content/plugins/bootstrap/css/ltr/bootstrap.min.css" rel="stylesheet" />
    <!-- END GLOBAL MANDATORY STYLES -->
    <link href="/Content/plugins/datatable/css/datatables.min.css" rel="stylesheet" />
    <link href="/Content/plugins/datatable/css/datatables.bootstrap.css" rel="stylesheet" />
    <!-- BEGIN THEME GLOBAL STYLES -->
    <link href="/Content/css/ltr/components.min.css" rel="stylesheet" />
    <link href="/Content/css/ltr/plugins.min.css" rel="stylesheet" />
    <!-- END THEME GLOBAL STYLES -->
    <link href="/Content/css/ltr/layout.css" rel="stylesheet" />
    <link href="/Content/css/ltr/darkblue.min.css" rel="stylesheet" />
    <link href="/Content/plugins/select2/css/ltr/select2.min.css" rel="stylesheet" />
    <link href="/Content/plugins/select2/css/ltr/select2-bootstrap.min.css" rel="stylesheet" />
    <link href="/Content/plugins/bootstrap-datepicker/css/ltr/bootstrap-datepicker.min.css" rel="stylesheet" />
    <link href="/Content/css/ltr/site.min.css?vs1.0" rel="stylesheet" />

    
    <style type="text/css">
        :root {
            background: #fff;
        }

        span#procent {
            display: block;
            position: absolute;
            left: 54%;
            top: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            font-size: 14px;
        }

            span#procent::after {
                content: '%';
            }

        .canvas-wrap {
            position: relative;
            width: 50px;
            height: 50px;
        }

        #FailMessageArea,
        #SuccessMessageArea,
        #ErrorTextDiv,
        #SuccessTextDiv {
            z-index: 9999999999 !important;
        }
    </style>


    <link rel="shortcut icon" type="image/png" href="/Content/img/favicon.png" />
    <script src="/Content/js/jquery.min.js"></script>

</head>
<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white">
    <div id="PageLoadGif">
        <div class="LoadingDiv">
            <img src="/Content/img/loading.gif" />
        </div>
    </div>
    <script type="text/javascript">
        $("#PageLoadGif").fadeOut();
    </script>
    <style>
        .parsley-required {
            color: red;
        }
    </style>
    
    
    <script type="text/javascript">
        var DataTableLanguage = '../../Content/plugins/datatable/js/i18n/Turkish.json';
    </script>
    


    <!-- END HEADER -->
    <!-- BEGIN HEADER & CONTENT DIVIDER -->
    <div class="clearfix"> </div>
    <div class="page-container">

        <div class="page-header navbar navbar-fixed-top">

            <ul class="Bread">
                <li><a href="/"><i class="icon-home"></i>Anasayfa</a><span>/</span></li>
                <li><a href="javascript:void(0);">&#220;R&#220;NLER / RE&#199;ETE SORGULAMA</a></li>
                
            </ul>

            <div class="top-menu">

                <div class="canvas-wrap  pull-left" style="margin-left: -84px;display:none;" onclick="ProgressBarModal('show');" id="circlr_progress">
                    <canvas id="canvas" width="50" height="50"></canvas>
                    <span id="procent"></span>
                    <span id="senkronizasyon_message" style="font-size:12px;color:#fff;display:block;margin-top: -46px;margin-left: -96px;">Eczane <br />Senkronizasyon</span>
                </div>
                <ul class="TopMenu pull-right">
                    
                    <li class="dropdown dropdown-quick-sidebar-toggler">
                        

                    </li>
                    <li class="dropdown dropdown-user dropdown-dark">
                        <a href="/hesap_yonetimi/profilim" class="dropdown-toggle">
                            <span class="username username-hide-on-mobile"><i class="fa fa-user"></i> admin test</span>
                        </a>
                    </li>
                    <li class="dropdown dropdown-quick-sidebar-toggler">
                        <a href="/Account/Logout">
                            <i class="icon-logout"></i>
                        </a>
                    </li>


                </ul>
            </div>
        </div>

        <div class="page-sidebar-wrapper">

    <div class="page-sidebar navbar-collapse collapse">
        <div class="menuLogo">
            <a href="/">
                <img src="/Content/img/logo.png" />
            </a>

        </div>
        <div class="clearfix"></div>

        <ul class="page-sidebar-menu   page-header-fixed page-sidebar-fixed  page-sidebar-menu-light " id="LeftMenu" data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200">
            <li class="sidebar-toggler-wrapper ">
                <div class="sidebar-toggler">
                    <span></span>
                </div>

            </li>
            <li class="nav-item  ">
                <a href="/" class="nav-link">
                    <i class="icon-home"></i>
                    <span class="title">Anasayfa</span>
                </a>
            </li>
                <li class="nav-item active open">
                    <a href="javascript:void(0);" class="nav-link nav-toggle">
                        <i class="icon-grid"></i>
                        <span class="title">Ürünler</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub-menu">
                            <li class="nav-item">
                                <a href="/urun/urun_sorgulama" class="nav-link">
                                    <span class="title"><i class="fa fa-angle-double-right"></i> Ürün Sorgulama</span>
                                </a>
                            </li>
                                                    <li class="nav-item">
                                <a href="/urun/recete_sorgulama" class="nav-link">
                                    <span class="title"><i class="fa fa-angle-double-right"></i> Reçete Sorgulama</span>
                                </a>
                            </li>
                                                    <li class="nav-item">
                                <a href="/urun/uretim_bildirimleri" class="nav-link">
                                    <span class="title"><i class="fa fa-angle-double-right"></i> Üretim Bildirim Sonuçlarý</span>
                                </a>
                            </li>
                    </ul>
                </li>
                            <li class="nav-item ">
                    <a href="/paydaslar" class="nav-link">
                        <i class="icon-share-alt"></i>
                        <span class="title">Paydaþlar</span>
                    </a>
                </li>
                            <li class="nav-item ">
                    <a href="/ilaclar" class="nav-link">
                        <i class="icon-chemistry"></i>
                        <span class="title">Ýlaçlar</span>
                    </a>
                </li>
                            <li class="nav-item  ">
                    <a href="javascript:void(0);" class="nav-link nav-toggle">
                        <i class="icon-users"></i>
                        <span class="title">Kullanýcýlar</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub-menu">
                            <li class="nav-item">
                                <a href="/kullanicilar/yonetim_modulu" class="nav-link">
                                    <span class="title"><i class="fa fa-circle"></i> Yönetim Kullanýcýlarý</span>
                                </a>
                            </li>
                                                    <li class="nav-item">
                                <a href="/kullanicilar/paydas_modulu" class="nav-link">
                                    <span class="title"><i class="fa fa-circle"></i> Paydaþ Kullanýcýlarý</span>
                                </a>
                            </li>
                    </ul>
                </li>
                            <li class="nav-item ">
                    <a href="/rol_yonetimi" class="nav-link">
                        <i class="icon-share-alt"></i>
                        <span class="title">Rol Yönetimi</span>
                    </a>
                </li>

                            <li class="nav-item ">
                    <a href="/geri_cekme/geri_cekme_islemi" class="nav-link">
                        <i class="icon-reload"></i>
                        <span class="title">Geri Çekme Ýþlemleri</span>
                    </a>
                </li>
                            <li class="nav-item ">
                    <a href="/blokaj/blokaj_islemi" class="nav-link">
                        <i class="icon-ban"></i>
                        <span class="title">Blokaj Ýþlemleri</span>
                    </a>
                </li>
                            <li class="nav-item ">
                    <a href="/hasilat_islemleri" class="nav-link">
                        <i class="icon-credit-card"></i>
                        <span class="title">Hasýlat Ýþlemleri</span>
                    </a>
                </li>

                <li class="nav-item ">
                    <a href="/urun_istisna" class="nav-link">
                        <i class="icon-question"></i>
                        <span class="title">Ürün Ýstisnalarý</span>
                    </a>
                </li>
                            <li class="nav-item ">
                    <a href="javascript:void(0);" class="nav-link nav-toggle">
                        <i class="glyphicon glyphicon-refresh"></i>
                        <span class="title">Senkronizasyon</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub-menu">
                            <li class="nav-item">
                                <a href="/senkronizasyon/eczane_senkronizasyon" class="nav-link">
                                    <span class="title"><i class="fa fa-angle-double-right"></i> Eczane Senkronizasyon</span>
                                </a>
                            </li>
                                                    <li class="nav-item">
                                <a href="/senkronizasyon/ecza_deposu_senkronizasyon" class="nav-link">
                                    <span class="title"><i class="fa fa-angle-double-right"></i> Ecza Deposu Senkronizasyon</span>
                                </a>
                            </li>
                                                    <li class="nav-item">
                                <a href="/senkronizasyon/ruhsat_sahibi_senkronizasyon" class="nav-link">
                                    <span class="title"><i class="fa fa-angle-double-right"></i> Ruhsat Sahibi Senkronizasyon</span>
                                </a>
                            </li>
                                                    <li class="nav-item">
                                <a href="/senkronizasyon/ilac_senkronizasyon" class="nav-link">
                                    <span class="title"><i class="fa fa-angle-double-right"></i> Ýlaç Senkronizasyon</span>
                                </a>
                            </li>
                                                    <li class="nav-item">
                                <a href="/senkronizasyon/ihracata_yetkili_firma_senkronizasyon" class="nav-link">
                                    <span class="title"><i class="fa fa-angle-double-right"></i> Ýhracata Yetkili Firma Senkronizasyon</span>
                                </a>
                            </li>
                                                    <li class="nav-item">
                                <a href="/senkronizasyon/sarf_merkezi_senkronizasyon" class="nav-link">
                                    <span class="title"><i class="fa fa-angle-double-right"></i> Sarf Merkezi Senkronizasyon</span>
                                </a>
                            </li>
                    </ul>
                </li>
                            <li class="nav-item ">
                    <a href="/Transfer" class="nav-link">
                        <i class="icon-shuffle"></i>
                        <span class="title">Kýsýtlý Paydaþ Ýþlemleri</span>
                    </a>
                </li>

        </ul>

    </div>
</div>

        <div class="page-content-wrapper">
            <div class="page-content">
                


<div id="portlet_prescription_list">
    <div style="position:relative;">
        <div class="portlet light bordered FilterPortlet">
            <div class="portlet-title">

                <div class="caption">
                    <span class="caption-subject"> Reçete Sorgulama</span>
                </div>
            </div>
            <div class="col-md-6" id="prescSearch" data-parsley-validate>
                <div class="form-group form-md-line-input form-md-floating-label">
                    <input class="form-control" id="_presc_record_number" type="text"  style="text-transform:uppercase;" onkeypress="return presCharSet(event)"  required/>
                    <label>Reçete Kayýt Numarasý</label>
                </div>
            </div>
            
            <div class="clearfix"></div>
        </div>
        <div class="filterFixed ">
            <a class="btn-floating FilterButon btn-lg btn blue tooltips" data-placement="bottom" data-original-title="Sorgula" onclick="loadTable(); return false;">
                <i class="fa fa-search"></i>
            </a>
        </div>
        <div class="filterFixedClear">
            <a class="btn-floating ClearButon btn-lg btn red tooltips" id="ClearButon" data-placement="top" data-original-title="Temizle" onclick="FilterClear();">
                <i class="fa fa-close"></i>
            </a>
        </div>
    </div>
    <div class="portlet light portlet-fit portlet-datatable bordered">
        <div class="portlet-title">
            <div class="caption">
                <span class="caption-subject"><i class="icon-users"></i> Reçete Sorgulama Sonuçlarý</span>
            </div>
        </div>
        <div class="portlet-body">
            <table id="tablePrescription" class="table table-striped table-bordered table-hover dataTable no-footer">
                <thead>
                    <tr>
                        <th></th>
                        <th>Bildirim ID</th>
                        <th>Reçete Kayýt No</th>
                        <th>Eczane ID</th>
                        <th>Reçete Tarihi</th>
                        <th>Hasta</th>
                        <th>Doktor</th>
                        <th>Eczane </th>
                        <th>Geri Ödeme Kurumu </th>
                        <th>Sonlanmýþ mý?</th>
                    </tr>
                </thead>
            </table>
            <div class="clearfix"></div>
        </div>
        <div class="clearfix"></div>
    </div>
</div>
<div id="portlet_detail"></div>

<div id="popup-content"></div>

<script type="text/javascript">
    var table;
    function prescriptionDetail(notificationId)
    {
        if (!CheckLogin()) {
            return;
        }
        PageLoadGif('show');
        var url = '/Product/PrescriptionDetail';
        $.ajax({
            url: url,
            type: 'GET',
            data: { notificationId: notificationId },
            async: false,
            success: function (data) {
                if (data) {
                    $('#portlet_detail').html(data);
                    //$('#portlet_filter').hide();
                    $('#portlet_prescription_list').hide();
                    InputControl();

                    PageLoadGif('hide');
                }
                else {
                    ErrorText('Ýþlem sýrasýnda bir hata oluþtu!');
                }
                PageLoadGif('hide');
            },
            error: function (data) {
                ErrorText('Ýþlem sýrasýnda bir hata oluþtu!');
                PageLoadGif('hide');
            }
        });
    }


    $(document).ready(function () {
        $('#_pharmacy_Id').select2({
            minimumInputLength: 3,
            language: "tr",
        ajax: {
            url: '/Product/SearchStakeholder?type=PHARMACY',
             dataType: 'json',
             delay: 400,
             processResults: function (data) {
                 return {
                     results: data
                 };
             },
             cache: false
         }
        });

        $('#_destionation_gln').select2({
            minimumInputLength: 3,
            language: "tr",
        ajax: {
            url: '/Product/SearchStakeholder?type=REI_AGENCY',
             dataType: 'json',
             delay: 400,
             processResults: function (data) {
                 return {
                     results: data
                 };
             },
             cache: false
         }
        });


        //loadTable();
    });

    function loadTable() {
        if (!CheckLogin()) {
            return;
        }
        if (PageValidate('#prescSearch')) {
            table = $('#tablePrescription').DataTable({
                "bServerSide": true,
                "bFilter": false,
                "ordering": false,
                "destroy": true,
                responsive: true,
                "deferLoading": 0,
                "fnServerData": function (sSource, aoData, fnCallback) {
                    aoData.push({ "name": "_presc_record_number", "value": $('#_presc_record_number').val().toUpperCase() });
                    //aoData.push({ "name": "_pharmacy_Id", "value": $('#_pharmacy_Id').val() });
                    //aoData.push({ "name": "_destionation_gln", "value": $('#_destionation_gln').val() });
                    //aoData.push({ "name": "_prescription_date", "value": $('#_prescription_date').val() });
                    $.getJSON(sSource, aoData, function (json) {
                        fnCallback(json);
                    });
                },
                "orderable": false,
                "bSortable": false,
                "bSortCellsTop": false,
                "sAjaxSource": '/Product/GetPrescriptionList',
                "bProcessing": true,
                "columnDefs": [
                    {
                        "render": function (data, type, row) {
                            return "<a onclick=\"prescriptionDetail('" + row[1] + "');\">" + row[1] + "</a>";
                        }, "targets": 1
                    },
                    {
                        "render": function (data, type, row) {
                            return "<a href='#NewModal' onclick='getStakeholder(" + row[7] + ")' data-toggle='modal'>" + row[7] + "</a>"
                        }, "targets": 7
                    },
                    {
                        "render": function (data, type, row) {
                            return "<a href='#NewModal' onclick='getStakeholder(" + row[8] + ")' data-toggle='modal'>" + row[8] + "</a>"
                        }, "targets": 8
                    },
                    { "visible": false, "targets": [0] }],
                "dom": '<"top"if>rt<"bottom"lp><"clear">',
                "language": {
                    "url": DataTableLanguage
                }
            });
            table.draw('page');
        }
        else {
            ParslySelected();
        }
    }

    function Reload_List(refresh) {
        if (!CheckLogin()) {
            return;
        }
        if (refresh && table != null)
            table.ajax.reload(null, false);
        $('#portlet_prescription_list').show();
        $('#portlet_detail').html('');
        $('#popup-content').html('');
    }
function getStakeholder(gln) {
    if (!CheckLogin()) {
        return;
    }
        var url = '/Stakeholder/GetStakeholder';

        $.ajax({
            url: url,
            data: { gln: gln },
            type: 'POST',
            success: function (data) {

                $('#InfoModal').modal('show');
                $('#ModalHeader h4').text('Paydaþ Ayrýntýlarý');
                $('#InfoModalArea').html(data);
            },
            error: function (data) {

            }

        });
    }

</script>
            </div>
        </div>
    </div>
    <script src="/Content/plugins/bootstrap/js/bootstrap.js"></script>
    <script src="/Content/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>

    
    <script src="/Content/plugins/datatable/js/jquery.dataTables.min.js"></script>
    <script src="/Content/plugins/datatable/js/datatables.bootstrap.js"></script>
    <script src="/Content/plugins/datatable/js/dataTables.responsive.min.js"></script>
    <link href="/Content/plugins/datatable/css/responsive.bootstrap.min.css" rel="stylesheet" />
    

    <script src="/Content/plugins/bootstrap-confirmation/bootstrap-confirmation.min.js"></script>


    <script src="/Content/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <script src="/Content/js/app.min.js"></script>

    <script src="/Content/plugins/bootstrap-confirmation/ui-confirmations.min.js"></script>

    <script src="/Content/plugins/select2/select2.full.min.js"></script>
    
    <script src="/Content/plugins/select2/i18n/tr.js"></script>
    <script src="/Content/js/site.min.js?vs1.0"></script>
    <script src="/Content/js/layout.min.js"></script>
    <script src="/Content/plugins/parsley/parsley.min.js"></script>
        <script src="/Content/plugins/parsley/i18n/tr.js"></script>
        <script src="/Content/plugins/bootstrap-datepicker/locales/bootstrap-datepicker.tr.min.js"></script>


    <script src="/Scripts/jquery.signalR-2.3.0.js"></script>
    <script src="/Scripts/jquery.signalR-2.3.0.min.js"></script>
    <script src="/signalr/hubs"></script>

    <script type="text/javascript">

        var activeSyncTypeList = [];
        var currentSyncType = 0;
        var syncActiveIndex = 1;
        setInterval(function () {
            if (syncActiveIndex <= activeSyncTypeList.length) {
                currentSyncType = activeSyncTypeList[syncActiveIndex - 1];
                syncActiveIndex++;
            }
            else {
                syncActiveIndex = 1;
            }
        }, 1000);


        $(document).ready(function () {
            //UpdateCircleProgress(0);
            // Reference the auto-generated proxy for the hub.
            var progress = $.connection.synchronizeHub;
            progress.client.CreateProgressModal = function (syncType) {
                $('#senkronizasyon_message').html('Eczane <br/>Senkronizasyon');
            }

            progress.client.AddProgress = function (message, menuMessage, percentage, syncType, successMessage) {

                $('#ProgressbarModalContent-' + syncType).fadeIn();
                $('#progressBarParagraph-' + syncType).text(message + " " + arguments[2] + "%");
                $('.saveNewListToDb-' + syncType).text(message + " " + arguments[2] + "%");
                $('.saveNewListToDb-' + syncType).attr("disabled", true);
                $('.disableSyncButtons-' + syncType).attr("disabled", true);
                $('#ProgressMessage-' + syncType).width(percentage + "%");
                $('#circlr_progress').fadeIn();
                if (activeSyncTypeList.indexOf(syncType) === -1)
                    activeSyncTypeList.push(syncType);
                //activeSyncTypeList[syncType] = syncType;

                if (syncType == currentSyncType) {
                    UpdateCircleProgress(percentage);
                    UpdateCircleProgressLable(menuMessage);
                }


                if (percentage == "100") {
                    $('#circlr_progress').fadeOut();
                    $('#ProgressbarModalContent-' + syncType).fadeOut();
                    $('.saveNewListToDb-' + syncType).text("Yeni Listeyi Veri Tabanýna Kaydet");
                    $('.saveNewListToDb-' + syncType).attr("disabled", false);
                    $('.disableSyncButtons-' + syncType).attr("disabled", false);
                    var index = activeSyncTypeList.indexOf(syncType);
                    if (index > -1) {
                        activeSyncTypeList.splice(index, 1);
                    }
                    SuccessText(successMessage);
                }
            };

            var connection = $.hubConnection('/signalr', { useDefaultPath: false });
            $.connection.hub.url = "../signalr";
            $.connection.hub.logging = true;
            $.connection.hub.start({ transport: ['webSockets', 'serverSentEvents', 'foreverFrame'] }).done(function () {
                var connectionId = $.connection.hub.id;
                console.log(connectionId);
            });
            $.connection.hub.disconnected(function () {
                setTimeout(function () {
                    $.connection.hub.start({ transport: ['webSockets', 'serverSentEvents', 'foreverFrame'] }).done(function () {
                        var connectionId = $.connection.hub.id;
                        console.log(connectionId);
                    });
                }, 2000);
            });
            //$.connection.hub.start().done(function () {
            //    var connectionId = $.connection.hub.id;
            //    console.log(connectionId);
            //});
        });

        function UpdateCircleProgress(progVal) {

            var can = document.getElementById('canvas'),
                spanProcent = document.getElementById('procent'),
                c = can.getContext('2d');

            var posX = can.width / 2,
                posY = can.height / 2,
                fps = 1000 / 200,
                procent = 0,
                oneProcent = 360 / 100,
                result = oneProcent * progVal;

            c.lineCap = 'round';
            arcMove(oneProcent * progVal);
            function arcMove(abc) {
                var deegres = abc;
                c.clearRect(0, 0, can.width, can.height);
                procent = deegres / oneProcent;

                spanProcent.innerHTML = procent.toFixed();

                c.beginPath();
                c.arc(posX, posY, 20, (Math.PI / 180) * 270, (Math.PI / 180) * (270 + 360));
                c.strokeStyle = 'rgba(255,255,255,0.2)';
                c.lineWidth = '3';
                c.stroke();

                c.beginPath();
                c.strokeStyle = '#fff';
                c.lineWidth = '3';
                c.arc(posX, posY, 20, (Math.PI / 180) * 270, (Math.PI / 180) * (270 + deegres));
                c.stroke();
            }
        }
        function UpdateCircleProgressLable(menuMessage) {
            $("#senkronizasyon_message").html(menuMessage);
        }


        function ProgressBarModal(showHide) {

            if (showHide === 'show') {
                $('#mod-progress').modal('show');
                //if (arguments.length >= 2) {
                //    $('#progressBarParagraph').text(arguments[1]);
                //} else {
                //    //$('#progressBarParagraph').text('U tijeku...');
                //}

                window.progressBarActive = true;

            } else {
                $('#mod-progress').modal('hide');
                window.progressBarActive = false;
            }
        }
    </script>

    
    <div class="modal fade in" id="mod-progress" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                </div>
                <div class="modal-body">
                    <div class="text-center" style="display:none;" id="ProgressbarModalContent-1">
                        <div style="font-size: 1.1em; padding-bottom: 5px">
                            <p id="progressBarParagraph-1">Eczane Senkronizasyon</p>
                        </div>
                        <div class="progress progress-striped active" style="position:relative; top:10px; width:100%;">
                            <div id="ProgressMessage-1" class="progress-bar progress-bar-info" style="width: 100%; border:none;"></div>
                        </div>
                    </div>
                    <div class="text-center" style="display:none;" id="ProgressbarModalContent-2">
                        <div style="font-size: 1.1em; padding-bottom: 5px">
                            <p id="progressBarParagraph-2">Depo Senkronizasyon</p>
                        </div>
                        <div class="progress progress-striped active" style="position:relative; top:10px; width:100%;">
                            <div id="ProgressMessage-2" class="progress-bar progress-bar-info" style="width: 100%; border:none;"></div>
                        </div>
                    </div>
                    <div class="text-center" style="display:none;" id="ProgressbarModalContent-3">
                        <div style="font-size: 1.1em; padding-bottom: 5px">
                            <p id="progressBarParagraph-3">Üretici Senkronizasyon</p>
                        </div>
                        <div class="progress progress-striped active" style="position:relative; top:10px; width:100%;">
                            <div id="ProgressMessage-3" class="progress-bar progress-bar-info" style="width: 100%; border:none;"></div>
                        </div>
                    </div>
                    <div class="text-center" style="display:none;" id="ProgressbarModalContent-4">
                        <div style="font-size: 1.1em; padding-bottom: 5px">
                            <p id="progressBarParagraph-4">Ýlaç Senkronizasyon</p>
                        </div>
                        <div class="progress progress-striped active" style="position:relative; top:10px; width:100%;">
                            <div id="ProgressMessage-4" class="progress-bar progress-bar-info" style="width: 100%; border:none;"></div>
                        </div>
                    </div>
                    <div class="text-center" style="display:none;" id="ProgressbarModalContent-5">
                        <div style="font-size: 1.1em; padding-bottom: 5px">
                            <p id="progressBarParagraph-5">Ýhracat Senkronizasyon</p>
                        </div>
                        <div class="progress progress-striped active" style="position:relative; top:10px; width:100%;">
                            <div id="ProgressMessage-5" class="progress-bar progress-bar-info" style="width: 100%; border:none;"></div>
                        </div>
                    </div>
                    <div class="text-center" style="display:none;" id="ProgressbarModalContent-6">
                        <div style="font-size: 1.1em; padding-bottom: 5px">
                            <p id="progressBarParagraph-6">Ýl Senkronizasyon</p>
                        </div>
                        <div class="progress progress-striped active" style="position:relative; top:10px; width:100%;">
                            <div id="ProgressMessage-6" class="progress-bar progress-bar-info" style="width: 100%; border:none;"></div>
                        </div>
                    </div>
                    <div class="text-center" style="display:none;" id="ProgressbarModalContent-7">
                        <div style="font-size: 1.1em; padding-bottom: 5px">
                            <p id="progressBarParagraph-7">Ýlçe Senkronizasyon</p>
                        </div>
                        <div class="progress progress-striped active" style="position:relative; top:10px; width:100%;">
                            <div id="ProgressMessage-7" class="progress-bar progress-bar-info" style="width: 100%; border:none;"></div>
                        </div>
                    </div>
                    <div class="text-center" style="display:none;" id="ProgressbarModalContent-8">
                        <div style="font-size: 1.1em; padding-bottom: 5px">
                            <p id="progressBarParagraph-8">Sarf Merkezi Senkronizasyon</p>
                        </div>
                        <div class="progress progress-striped active" style="position:relative; top:10px; width:100%;">
                            <div id="ProgressMessage-8" class="progress-bar progress-bar-info" style="width: 100%; border:none;"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->

    <script type="text/javascript">
        var body = document.body,
            html = document.documentElement;

        var height = Math.max(body.scrollHeight, body.offsetHeight,
            html.clientHeight, html.scrollHeight, html.offsetHeight);


        $('[data-toggle=confirmation]').confirmation({
            rootSelector: '[data-toggle=confirmation]',
            // other options
        });

        function PageValidate(FormName) {
            $(FormName).parsley();
            if ($(FormName).parsley().validate())
                return true;
        }

        $('.date-picker').datepicker({ autoclose: true, showButtonPanel: true, dateFormat: 'dd/MM/yyyy', clearBtn: true, firstDate: 1, language: 'tr-TR' });
        $('.date-picker').on("keydown", function () {
            return false;
        });
        $(".select2").select2({
            language: "tr"
        });
        //$(".select2").select2.defaults.set('language', 'tr');
        DateSelected();/*Datepicker seçildiðinde edited class ekliyor.*/
        $("input:required, textarea:required").attr("title", "Boþ geçilemez!");
    </script>
    

    <div class="modal fade" id="login" tabindex="-1" role="form" aria-hidden="true">
        <div class="modal-dialog modal-full">
            <div class="modal-content">
                <div class="modal-body">
                    <form class="login-form" id="login-form" action="/Home" method="post" onkeypress="if(event.keyCode == 13) Login();" data-parsley-validate>
                        <div class="content">
                                <div class="LoginContent">
                                    <div class="LoginInput">
                                        <img src="/Content/img/logoLogin.png" />
                                        <h3>ÝTS-MC</h3>
                                        <div id="UserDiv">
                                            <div class="col-md-12 margin-top-30">
                                                <div class="form-group form-md-line-input form-md-floating-label">
                                                    <i class="icon-user"></i>
                                                    <input id="caps" type="text" tabindex="1" class="form-control" autocomplete="off" placeholder="Kullanýcý Adý" name="_email" required>
                                                    <i class="fa"></i>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group form-md-line-input form-md-floating-label">
                                                    <i class="icon-lock"></i>
                                                    <input class="form-control" tabindex="2" type="password" autocomplete="off" id="password" placeholder="Þifre" name="_password" required>
                                                    <i class="fa"></i>
                                                </div>
                                            </div>
                                            <div id="recaptchaArea">
                                                <div class="col-md-12">
                                                    <div class="col-md-8">
                                                        <img alt="Captcha" width="180" height="50" id="captcha" src="/Account/CaptchaImage?prefix=Login&amp;noisy=False" onclick="refreshImage(); return false;" />
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="form-group form-md-line-input form-md-floating-label">
                                                            <input name="_captcha" id="captcha_val" tabindex="3" onkeypress="return isNumberKey(event)" type="text" style="text-align:center;padding:0 5px !important;" class="form-control" autocomplete="off" required>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <a href="/hesap_yonetimi/sifremi_unuttum" tabindex="4">
                                                    Þifremi unuttum
                                                </a>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="fixed-action-btn pull-right margin-top-10">
                                                    <a class="btn-floating btn-lg btn green" tabindex="5" onclick="Login();">
                                                        <i class="fa fa-check"></i>
                                                        <span>Giriþ</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="LoginLogo" style="background-image: url('../../Content/img/scantran-system.jpg');background-size: cover;background-position: center;"></div>
                                    <div class="clearfix"></div>
                                </div>
                        </div>
                    </form>
                    <script type="text/javascript">
                        function refreshImage()
                        {
                            $('#captcha').attr('src', '/Account/CaptchaImage?prefix=Login&amp;noisy=False&e=' + Math.floor((Math.random() * 100) + 1));
                            $('#captcha_val').val('');
                        }
                        //login from modal
                        function Login() {
                            PageLoadGifSmall('.LoginContent');
                            if (PageValidate("#login-form")) {
                                var url = '/Account/Login';
                                $.ajax({
                                    url: url,
                                    data: $('#login-form').serialize(),
                                    type: 'POST',
                                    async: true,
                                    success: function (data) {
                                        if (data.Success) {
                                            $('#login').modal('hide');
                                            PageUnloadGifSmall(".LoginContent");
                                        }
                                        else {
                                            ErrorText(data.ResponseMessage);
                                            $('#password').val('');
                                            $('#captcha_val').val('');
                                            refreshImage();
                                            $(".form-group.form-md-line-input.form-md-floating-label i.fa.fa-check").fadeOut("fast");
                                            PageUnloadGifSmall(".LoginContent");
                                        }

                                    },
                                    error: function (data) {
                                        ErrorText('Ýþlem sýrasýnda bir hata oluþtu');
                                        PageUnloadGifSmall(".LoginContent");
                                    }
                                });
                            } else {
                                PageUnloadGifSmall(".LoginContent");
                            }

                        }

                        function CheckLogin()
                        {
                            var response = false;
                            $.ajax({
                                url: '/Account/IsLogon',
                                type: 'GET',
                                async: false,
                                success: function (data) {
                                    if (!data) {
                                        //open modal
                                        refreshImage();
                                        $('#login').modal('show');
                                        response = false;
                                    }
                                    else {
                                        response = true;
                                    }
                                }
                            });
                            return response;
                        }
                    </script>
                </div>
                
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>


    <div class="modal fade bs-modal-sm" id="InfoModal" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header" id="ModalHeader">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><i class="icon-layers"></i></h4>
                </div>
                <div class="modal-body" style="word-wrap: break-word;" id="InfoModalArea">

                </div>
                <div class="modal-footer">



                    <a class="btn btn-danger  btn-circle" href="javascript:;" data-dismiss="modal">
                        <i class="glyphicon glyphicon-remove"></i>
                        Kapat
                    </a>



                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</body>
</html>
